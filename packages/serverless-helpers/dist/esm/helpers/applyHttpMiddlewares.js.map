{"version":3,"file":"applyHttpMiddlewares.js","names":["middy","httpErrorHandler","jsonBodyParser","jsonValidator","applyHttpMiddlewares","handler","inputSchema","outputSchema","middyfiedHandler","use"],"sources":["../../../src/helpers/applyHttpMiddlewares.ts"],"sourcesContent":["import middy from '@middy/core';\nimport httpErrorHandler from '@middy/http-error-handler';\nimport jsonBodyParser from '@middy/http-json-body-parser';\nimport jsonValidator from '@middy/validator';\nimport type { Handler } from 'aws-lambda';\nimport { JSONSchema } from 'json-schema-to-ts';\n\ninterface Options {\n  inputSchema?: JSONSchema;\n  outputSchema?: JSONSchema;\n}\n\nconst applyHttpMiddlewares = <Event, Result>(\n  handler: Handler<Event, Result>,\n  { inputSchema, outputSchema }: Options,\n): middy.MiddyfiedHandler<Event, Result> => {\n  const middyfiedHandler = middy(handler);\n\n  middyfiedHandler.use(jsonBodyParser());\n  middyfiedHandler.use(jsonValidator({ inputSchema, outputSchema }));\n\n  middyfiedHandler.use(httpErrorHandler());\n\n  return middyfiedHandler;\n};\n\nexport default applyHttpMiddlewares;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,aAAa;AAC/B,OAAOC,gBAAgB,MAAM,2BAA2B;AACxD,OAAOC,cAAc,MAAM,8BAA8B;AACzD,OAAOC,aAAa,MAAM,kBAAkB;AAS5C,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoB,CACxBC,OAA+B,QAEW;EAAA,IADxCC,WAAW,QAAXA,WAAW;IAAEC,YAAY,QAAZA,YAAY;EAE3B,IAAMC,gBAAgB,GAAGR,KAAK,CAACK,OAAO,CAAC;EAEvCG,gBAAgB,CAACC,GAAG,CAACP,cAAc,EAAE,CAAC;EACtCM,gBAAgB,CAACC,GAAG,CAACN,aAAa,CAAC;IAAEG,WAAW,EAAXA,WAAW;IAAEC,YAAY,EAAZA;EAAa,CAAC,CAAC,CAAC;EAElEC,gBAAgB,CAACC,GAAG,CAACR,gBAAgB,EAAE,CAAC;EAExC,OAAOO,gBAAgB;AACzB,CAAC;AAED,eAAeJ,oBAAoB"}