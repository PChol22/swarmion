{"version":3,"file":"applyHttpMiddlewares.js","names":["applyHttpMiddlewares","handler","inputSchema","outputSchema","middyfiedHandler","middy","use","jsonBodyParser","jsonValidator","httpErrorHandler"],"sources":["../../../src/helpers/applyHttpMiddlewares.ts"],"sourcesContent":["import middy from '@middy/core';\nimport httpErrorHandler from '@middy/http-error-handler';\nimport jsonBodyParser from '@middy/http-json-body-parser';\nimport jsonValidator from '@middy/validator';\nimport type { Handler } from 'aws-lambda';\nimport { JSONSchema } from 'json-schema-to-ts';\n\ninterface Options {\n  inputSchema?: JSONSchema;\n  outputSchema?: JSONSchema;\n}\n\nconst applyHttpMiddlewares = <Event, Result>(\n  handler: Handler<Event, Result>,\n  { inputSchema, outputSchema }: Options,\n): middy.MiddyfiedHandler<Event, Result> => {\n  const middyfiedHandler = middy(handler);\n\n  middyfiedHandler.use(jsonBodyParser());\n  middyfiedHandler.use(jsonValidator({ inputSchema, outputSchema }));\n\n  middyfiedHandler.use(httpErrorHandler());\n\n  return middyfiedHandler;\n};\n\nexport default applyHttpMiddlewares;\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AASA,IAAMA,oBAAoB,GAAG,SAAvBA,oBAAoB,CACxBC,OAA+B,QAEW;EAAA,IADxCC,WAAW,QAAXA,WAAW;IAAEC,YAAY,QAAZA,YAAY;EAE3B,IAAMC,gBAAgB,GAAG,IAAAC,gBAAK,EAACJ,OAAO,CAAC;EAEvCG,gBAAgB,CAACE,GAAG,CAAC,IAAAC,8BAAc,GAAE,CAAC;EACtCH,gBAAgB,CAACE,GAAG,CAAC,IAAAE,qBAAa,EAAC;IAAEN,WAAW,EAAXA,WAAW;IAAEC,YAAY,EAAZA;EAAa,CAAC,CAAC,CAAC;EAElEC,gBAAgB,CAACE,GAAG,CAAC,IAAAG,4BAAgB,GAAE,CAAC;EAExC,OAAOL,gBAAgB;AACzB,CAAC;AAAC,eAEaJ,oBAAoB;AAAA"}