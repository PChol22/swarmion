{"version":3,"file":"throwIfBootstrapMetadataDetected.js","names":["BOOTSTRAP_METADATA_PREFIX","throwIfBootstrapMetadataDetected","Resources","undefined","Object","entries","forEach","logicalId","resource","Metadata","keys","metadataKey","includes","Error"],"sources":["../../../src/utils/throwIfBootstrapMetadataDetected.ts"],"sourcesContent":["import { CloudFormationTemplate } from 'types';\n\nconst BOOTSTRAP_METADATA_PREFIX = 'aws:asset:';\n\nexport const throwIfBootstrapMetadataDetected = ({\n  Resources,\n}: CloudFormationTemplate): void => {\n  if (Resources !== undefined) {\n    Object.entries(Resources).forEach(([logicalId, resource]) => {\n      if ('Metadata' in resource) {\n        if (resource.Metadata === undefined) {\n          return;\n        }\n\n        Object.keys(resource.Metadata).forEach(metadataKey => {\n          if (metadataKey.includes(BOOTSTRAP_METADATA_PREFIX)) {\n            throw new Error(\n              `Resource ${logicalId} cannot be deployed because it needs the bootstrap stack`,\n            );\n          }\n        });\n      }\n    });\n  }\n};\n"],"mappings":";AAEA,IAAMA,yBAAyB,GAAG,YAAY;AAE9C,OAAO,IAAMC,gCAAgC,GAAG,SAAnCA,gCAAgC,OAET;EAAA,IADlCC,SAAS,QAATA,SAAS;EAET,IAAIA,SAAS,KAAKC,SAAS,EAAE;IAC3BC,MAAM,CAACC,OAAO,CAACH,SAAS,CAAC,CAACI,OAAO,CAAC,iBAA2B;MAAA;QAAzBC,SAAS;QAAEC,QAAQ;MACrD,IAAI,UAAU,IAAIA,QAAQ,EAAE;QAC1B,IAAIA,QAAQ,CAACC,QAAQ,KAAKN,SAAS,EAAE;UACnC;QACF;QAEAC,MAAM,CAACM,IAAI,CAACF,QAAQ,CAACC,QAAQ,CAAC,CAACH,OAAO,CAAC,UAAAK,WAAW,EAAI;UACpD,IAAIA,WAAW,CAACC,QAAQ,CAACZ,yBAAyB,CAAC,EAAE;YACnD,MAAM,IAAIa,KAAK,oBACDN,SAAS,8DACtB;UACH;QACF,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;EACJ;AACF,CAAC"}