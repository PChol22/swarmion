{"version":3,"file":"listLocalContractSchemas.js","names":["isUndefined","mapValues","omitBy","getContractFullSchema","listLocalContractSchemas","serverless","service","initialServerlessConfig","contracts","provides","consumes","contract"],"sources":["../../../../src/plugin/utils/listLocalContractSchemas.ts"],"sourcesContent":["import { JSONSchema } from 'json-schema-to-ts';\nimport isUndefined from 'lodash/isUndefined';\nimport mapValues from 'lodash/mapValues';\nimport omitBy from 'lodash/omitBy';\nimport Serverless from 'serverless';\n\nimport { getContractFullSchema } from '@swarmion/serverless-contracts';\n\nimport {\n  ServerlessContracts,\n  ServerlessContractSchemas,\n} from 'types/serviceOptions';\n\nexport const listLocalContractSchemas = (\n  serverless: Serverless,\n): ServerlessContractSchemas => {\n  // @ts-ignore mistype in the orignals (the animals)\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  const { provides, consumes } = serverless.service.initialServerlessConfig\n    .contracts as ServerlessContracts;\n\n  return {\n    provides: omitBy(\n      mapValues(provides, contract => getContractFullSchema(contract)),\n      isUndefined,\n    ) as Record<string, JSONSchema>,\n    consumes: omitBy(\n      mapValues(consumes, contract => getContractFullSchema(contract)),\n      isUndefined,\n    ) as Record<string, JSONSchema>,\n  };\n};\n"],"mappings":"AACA,OAAOA,WAAW,MAAM,oBAAoB;AAC5C,OAAOC,SAAS,MAAM,kBAAkB;AACxC,OAAOC,MAAM,MAAM,eAAe;AAGlC,SAASC,qBAAqB,QAAQ,gCAAgC;AAOtE,OAAO,IAAMC,wBAAwB,GAAG,SAA3BA,wBAAwB,CACnCC,UAAsB,EACQ;EAC9B;EACA;EACA,WAA+BA,UAAU,CAACC,OAAO,CAACC,uBAAuB,CACtEC,SAAS;IADJC,QAAQ,QAARA,QAAQ;IAAEC,QAAQ,QAARA,QAAQ;EAG1B,OAAO;IACLD,QAAQ,EAAEP,MAAM,CACdD,SAAS,CAACQ,QAAQ,EAAE,UAAAE,QAAQ;MAAA,OAAIR,qBAAqB,CAACQ,QAAQ,CAAC;IAAA,EAAC,EAChEX,WAAW,CACkB;IAC/BU,QAAQ,EAAER,MAAM,CACdD,SAAS,CAACS,QAAQ,EAAE,UAAAC,QAAQ;MAAA,OAAIR,qBAAqB,CAACQ,QAAQ,CAAC;IAAA,EAAC,EAChEX,WAAW;EAEf,CAAC;AACH,CAAC"}