{"version":3,"file":"updatePackages.js","names":["readJson","execSync","join","updatePackages","tree","options","packageRoot","dependencies","devDependencies","directory","name","Object","keys","cwd","root","stdio"],"sources":["../../../../src/generators/helpers/updatePackages.ts"],"sourcesContent":["import { readJson, Tree } from '@nrwl/devkit';\nimport { execSync } from 'child_process';\nimport { join } from 'path';\n\nimport { NormalizedSchema } from '../types';\n\nexport const updatePackages = (tree: Tree, options: NormalizedSchema): void => {\n  const { dependencies, devDependencies } = readJson<{\n    dependencies?: { [key: string]: string };\n    devDependencies?: { [key: string]: string };\n    [key: string]: unknown;\n  }>(tree, join(options.packageRoot, `package.json`));\n\n  execSync(\n    `pnpm --dir ${options.directory}/${options.name} \\\n      add ${Object.keys(dependencies ?? {}).join(' ')}`,\n    {\n      cwd: join(tree.root),\n      stdio: [0, 1, 2],\n    },\n  );\n  execSync(\n    `pnpm --dir ${options.directory}/${options.name} \\\n      add --save-dev ${Object.keys(devDependencies ?? {}).join(' ')}`,\n    {\n      cwd: join(tree.root),\n      stdio: [0, 1, 2],\n    },\n  );\n};\n"],"mappings":"AAAA,SAASA,QAAQ,QAAc,cAAc;AAC7C,SAASC,QAAQ,QAAQ,eAAe;AACxC,SAASC,IAAI,QAAQ,MAAM;AAI3B,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAc,CAAIC,IAAU,EAAEC,OAAyB,EAAW;EAC7E,gBAA0CL,QAAQ,CAI/CI,IAAI,EAAEF,IAAI,CAACG,OAAO,CAACC,WAAW,iBAAiB,CAAC;IAJ3CC,YAAY,aAAZA,YAAY;IAAEC,eAAe,aAAfA,eAAe;EAMrCP,QAAQ,sBACQI,OAAO,CAACI,SAAS,cAAIJ,OAAO,CAACK,IAAI,wBACvCC,MAAM,CAACC,IAAI,CAACL,YAAY,aAAZA,YAAY,cAAZA,YAAY,GAAI,CAAC,CAAC,CAAC,CAACL,IAAI,CAAC,GAAG,CAAC,GACjD;IACEW,GAAG,EAAEX,IAAI,CAACE,IAAI,CAACU,IAAI,CAAC;IACpBC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;EACjB,CAAC,CACF;EACDd,QAAQ,sBACQI,OAAO,CAACI,SAAS,cAAIJ,OAAO,CAACK,IAAI,mCAC5BC,MAAM,CAACC,IAAI,CAACJ,eAAe,aAAfA,eAAe,cAAfA,eAAe,GAAI,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,GAAG,CAAC,GAC/D;IACEW,GAAG,EAAEX,IAAI,CAACE,IAAI,CAACU,IAAI,CAAC;IACpBC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;EACjB,CAAC,CACF;AACH,CAAC"}