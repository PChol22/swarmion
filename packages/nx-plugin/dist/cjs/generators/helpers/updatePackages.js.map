{"version":3,"file":"updatePackages.js","names":["updatePackages","tree","options","readJson","join","packageRoot","dependencies","devDependencies","execSync","directory","name","Object","keys","cwd","root","stdio"],"sources":["../../../../src/generators/helpers/updatePackages.ts"],"sourcesContent":["import { readJson, Tree } from '@nrwl/devkit';\nimport { execSync } from 'child_process';\nimport { join } from 'path';\n\nimport { NormalizedSchema } from '../types';\n\nexport const updatePackages = (tree: Tree, options: NormalizedSchema): void => {\n  const { dependencies, devDependencies } = readJson<{\n    dependencies?: { [key: string]: string };\n    devDependencies?: { [key: string]: string };\n    [key: string]: unknown;\n  }>(tree, join(options.packageRoot, `package.json`));\n\n  execSync(\n    `pnpm --dir ${options.directory}/${options.name} \\\n      add ${Object.keys(dependencies ?? {}).join(' ')}`,\n    {\n      cwd: join(tree.root),\n      stdio: [0, 1, 2],\n    },\n  );\n  execSync(\n    `pnpm --dir ${options.directory}/${options.name} \\\n      add --save-dev ${Object.keys(devDependencies ?? {}).join(' ')}`,\n    {\n      cwd: join(tree.root),\n      stdio: [0, 1, 2],\n    },\n  );\n};\n"],"mappings":";;;;;;AAAA;AACA;AACA;AAIO,IAAMA,cAAc,GAAG,SAAjBA,cAAc,CAAIC,IAAU,EAAEC,OAAyB,EAAW;EAC7E,gBAA0C,IAAAC,gBAAQ,EAI/CF,IAAI,EAAE,IAAAG,UAAI,EAACF,OAAO,CAACG,WAAW,iBAAiB,CAAC;IAJ3CC,YAAY,aAAZA,YAAY;IAAEC,eAAe,aAAfA,eAAe;EAMrC,IAAAC,uBAAQ,uBACQN,OAAO,CAACO,SAAS,cAAIP,OAAO,CAACQ,IAAI,wBACvCC,MAAM,CAACC,IAAI,CAACN,YAAY,aAAZA,YAAY,cAAZA,YAAY,GAAI,CAAC,CAAC,CAAC,CAACF,IAAI,CAAC,GAAG,CAAC,GACjD;IACES,GAAG,EAAE,IAAAT,UAAI,EAACH,IAAI,CAACa,IAAI,CAAC;IACpBC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;EACjB,CAAC,CACF;EACD,IAAAP,uBAAQ,uBACQN,OAAO,CAACO,SAAS,cAAIP,OAAO,CAACQ,IAAI,mCAC5BC,MAAM,CAACC,IAAI,CAACL,eAAe,aAAfA,eAAe,cAAfA,eAAe,GAAI,CAAC,CAAC,CAAC,CAACH,IAAI,CAAC,GAAG,CAAC,GAC/D;IACES,GAAG,EAAE,IAAAT,UAAI,EAACH,IAAI,CAACa,IAAI,CAAC;IACpBC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;EACjB,CAAC,CACF;AACH,CAAC;AAAC"}