{"version":3,"file":"requestParameters.js","names":["getRequestParameters","contract","requestArguments","pathParameters","queryStringParameters","headers","body","path","fillPathTemplate","omitBy","method","isUndefined"],"sources":["../../../../../src/contracts/apiGateway/features/requestParameters.ts"],"sourcesContent":["import isUndefined from 'lodash/isUndefined';\nimport omitBy from 'lodash/omitBy';\n\nimport { fillPathTemplate } from 'utils';\n\nimport { ApiGatewayContract } from '../apiGatewayContract';\nimport { BodyType, RequestArguments, RequestParameters } from '../types';\n\nexport const getRequestParameters = <Contract extends ApiGatewayContract>(\n  contract: Contract,\n  requestArguments: RequestArguments<Contract>,\n): RequestParameters<BodyType<Contract>> => {\n  // TODO improve inner typing here\n  const { pathParameters, queryStringParameters, headers, body } =\n    requestArguments as {\n      pathParameters: Record<string, string>;\n      queryStringParameters: Record<string, string | undefined>;\n      headers: Record<string, string>;\n      body: BodyType<Contract>;\n    };\n\n  const path =\n    typeof pathParameters !== 'undefined'\n      ? fillPathTemplate(contract.path, pathParameters)\n      : contract.path;\n\n  return omitBy(\n    {\n      method: contract.method,\n      path,\n      body,\n      queryStringParameters: omitBy(\n        queryStringParameters,\n        isUndefined,\n      ) as Record<string, string>,\n      headers,\n    },\n    isUndefined,\n  ) as unknown as RequestParameters<BodyType<Contract>>;\n};\n"],"mappings":";;;;;;;AAAA;AACA;AAEA;AAKO,IAAMA,oBAAoB,GAAG,SAAvBA,oBAAoB,CAC/BC,QAAkB,EAClBC,gBAA4C,EACF;EAC1C;EACA,WACEA,gBAAgB;IADVC,cAAc,QAAdA,cAAc;IAAEC,qBAAqB,QAArBA,qBAAqB;IAAEC,OAAO,QAAPA,OAAO;IAAEC,IAAI,QAAJA,IAAI;EAQ5D,IAAMC,IAAI,GACR,OAAOJ,cAAc,KAAK,WAAW,GACjC,IAAAK,uBAAgB,EAACP,QAAQ,CAACM,IAAI,EAAEJ,cAAc,CAAC,GAC/CF,QAAQ,CAACM,IAAI;EAEnB,OAAO,IAAAE,kBAAM,EACX;IACEC,MAAM,EAAET,QAAQ,CAACS,MAAM;IACvBH,IAAI,EAAJA,IAAI;IACJD,IAAI,EAAJA,IAAI;IACJF,qBAAqB,EAAE,IAAAK,kBAAM,EAC3BL,qBAAqB,EACrBO,uBAAW,CACc;IAC3BN,OAAO,EAAPA;EACF,CAAC,EACDM,uBAAW,CACZ;AACH,CAAC;AAAC"}