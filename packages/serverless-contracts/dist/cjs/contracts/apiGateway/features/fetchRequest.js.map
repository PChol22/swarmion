{"version":3,"file":"fetchRequest.js","names":["getFetchRequest","contract","fetchFunction","options","getRequestParameters","path","method","queryStringParameters","body","headers","searchString","URLSearchParams","toString","baseUrl","undefined","url","URL","search","JSON","stringify","response","json"],"sources":["../../../../../src/contracts/apiGateway/features/fetchRequest.ts"],"sourcesContent":["/// <reference lib=\"dom\" />\n\nimport { ApiGatewayContract } from '../apiGatewayContract';\nimport { OutputType, RequestArguments } from '../types';\nimport { getRequestParameters } from './requestParameters';\n\nexport const getFetchRequest = async <Contract extends ApiGatewayContract>(\n  contract: Contract,\n  fetchFunction: typeof fetch,\n  options: RequestArguments<Contract> & { baseUrl?: URL | string },\n): Promise<OutputType<Contract>> => {\n  const { path, method, queryStringParameters, body, headers } =\n    getRequestParameters<Contract>(contract, options);\n\n  let url;\n  const searchString = new URLSearchParams(queryStringParameters).toString();\n\n  if (options.baseUrl !== undefined) {\n    url = new URL(path, options.baseUrl);\n\n    url.search = searchString;\n  } else {\n    url = `${path}?${searchString}`;\n  }\n\n  const response = await fetchFunction(url, {\n    method,\n    headers,\n    body: JSON.stringify(body),\n  });\n\n  return response.json() as Promise<OutputType<Contract>>;\n};\n"],"mappings":";;;;;;;;;AAIA;AAJA;;AAMO,IAAMA,eAAe;EAAA,yFAAG,iBAC7BC,QAAkB,EAClBC,aAA2B,EAC3BC,OAAgE;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA,wBAG9D,IAAAC,uCAAoB,EAAWH,QAAQ,EAAEE,OAAO,CAAC,EAD3CE,IAAI,yBAAJA,IAAI,EAAEC,MAAM,yBAANA,MAAM,EAAEC,qBAAqB,yBAArBA,qBAAqB,EAAEC,IAAI,yBAAJA,IAAI,EAAEC,OAAO,yBAAPA,OAAO;YAIpDC,YAAY,GAAG,IAAIC,eAAe,CAACJ,qBAAqB,CAAC,CAACK,QAAQ,EAAE;YAE1E,IAAIT,OAAO,CAACU,OAAO,KAAKC,SAAS,EAAE;cACjCC,GAAG,GAAG,IAAIC,GAAG,CAACX,IAAI,EAAEF,OAAO,CAACU,OAAO,CAAC;cAEpCE,GAAG,CAACE,MAAM,GAAGP,YAAY;YAC3B,CAAC,MAAM;cACLK,GAAG,aAAMV,IAAI,cAAIK,YAAY,CAAE;YACjC;YAAC;YAAA,OAEsBR,aAAa,CAACa,GAAG,EAAE;cACxCT,MAAM,EAANA,MAAM;cACNG,OAAO,EAAPA,OAAO;cACPD,IAAI,EAAEU,IAAI,CAACC,SAAS,CAACX,IAAI;YAC3B,CAAC,CAAC;UAAA;YAJIY,QAAQ;YAAA,iCAMPA,QAAQ,CAACC,IAAI,EAAE;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CACvB;EAAA,gBA1BYrB,eAAe;IAAA;EAAA;AAAA,GA0B3B;AAAC"}